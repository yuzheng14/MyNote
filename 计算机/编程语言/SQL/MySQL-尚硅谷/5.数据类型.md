# 数据类型

## 常见的数据类型

- 数值型
  - 整型
  - 小数
    - 定点数
    - 浮点数
- 字符型
  - 较短的文本
    - char
    - varchar
  - 较长的文本
    - text
    - blob（较长的二进制数据，如图片）
- 日期型

## 整型

### 分类

| 整数类型     | 字节 | 范围         |
| ------------ | ---- | ------------ |
| Tinyint      | 1    | 自己不会算？ |
| Smallint     | 2    | 同上         |
| Mediumint    | 3    | 同上         |
| Int、integer | 4    | 同上         |
| Bigint       | 8    | 同上         |

### 设置有符号还是无符号

```mysql
CREATE TABLE tab_int(
	t1 INT; 			#有符号
	t2 INT UNSIGNED		#无符号
);
```

### 特点

- 默认有符号
- 如果插入的数值超出了整型的范围，会报`out of range`异常，并且插入临界值
- 若不设置长度，则有默认长度
- 对于整型来说，范围由类型决定，长度决定的是显示的长度，若不够则在前面填充0，默认不起作用，创建表时写`ZEROFILL`关键字才起作用，设定此关键字则会改变为无符号

## 小数

### 浮点型

| 浮点数类型 | 字节 | 范围                                                         |
| ---------- | ---- | ------------------------------------------------------------ |
| float      | 4    | ![][+-]1.75494351E-38~<br/>![][+-]3.402823466E+38            |
| double     | 8    | ![][+-]2.2250738585072014E-308~<br/>![][+-]1.7976931348623157E+308 |



### 定点型

| 定点数类型                | 字节 | 范围                                                         |
| ------------------------- | ---- | ------------------------------------------------------------ |
| DEC(M,D)<br/>DECIMAL(M,D) | M+2  | 最大取值范围与double相同，给定decimal的有效取值范围由M和D决定 |

[+-]:https://math.jianshu.com/math?formula=\pm

### 分类

#### 浮点型

float(M,D)

double(M,D)

#### 定点型

dec(M,D)

decimal(M,D)

### 特点

1. M：整数部分+小数部分个数	D：小数部分个数	如果超出，则插入临界值（根据版本也不一样）
2. M和D都可以省略，decimal的默认值M为10，D为0，float和double则会根据插入的数值的精度来决定精度
3. 定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用

### 原则

所选择的类型越简单越好，能保存数值的类型越小越好

## 字符型

### 分类

#### 较短的文本

char

varchar

#### 较长的文本

text

blob（较大的二进制）

### 较短文本

#### char和varchar

| 字符串类型 | 最多字符数 | 描述及存储需求       |
| ---------- | ---------- | -------------------- |
| char(M)    | M          | M为0~255之间的整数   |
| varchar(M) | M          | M为0~65535之间的整数 |

char和varchar的区别为char是不可变字符，varchar是可变字符，char类型设计的多少就开多少空间，varchar根据存的字符串开空间

#### binary和varbinary

类似于char和varchar，不同的是它们包含二进制字符串而不包含非二进制字符串

#### Enum类型

又称为枚举类型，要求插入的值必须属于列表中指定的值之一

如果列表成员为1~255，则需要1个字节存储

如果列表成员为255~65535，则需要2个字节存储

最多需要65535个成员

#### Set类型

和Enum类型类似，里面可以保存0~64个成员。和Enum类型最大的区别是：set类型一次可以选取多个成员，而Enum只能选一个

根据成员个数不同，存储所占的字节也不同

成员数		字节数

1~8				1

9~16			  2

17~24			3

25~32			4

33~64			8

### 特点

1. M为最大的字符数
2. char为固定长度字符，varchar为可变长度字符
3. char比较耗费空间，varchar比较节省空间
4. char的效率比varchar高一点点
5. char可以省略长度，默认为1，varchar不能省略长度
6. enum和set不区分大小写

## 日期型

### 分类

| 日期和时间类型 | 字节 | 最小值              | 最大值              |
| -------------- | ---- | ------------------- | ------------------- |
| date           | 4    | 1000-01-01          | 9999-12-31          |
| datetime       | 8    | 1000-01-01 00:00:00 | 9999-12-31 23:59:59 |
| timestamp      | 4    | 19700101080001      | 2038年的某个时刻    |
| time           | 3    | -838:59:59          | 838:59:59           |
| year           | 1    | 1901                | 2155                |

### timestamp和datetime的区别

1. timestamp支持的时间范围较小
2. timestamp和实际时区有关，更能反映世纪的日期，而datetime则只能反映出插入时的当地时区
3. timestamp的属性受MySQL版本和SQLMode的影响很大

